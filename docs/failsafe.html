<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Failsafe &middot; Cleanflight
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.4/css/bootstrap.min.css">
  <!-- build:css /assets/stylesheets/style.min.css -->
  <link rel="stylesheet" href="http://shipow.github.io/cleanflight-web/assets/stylesheets/style.css">
  <!-- endbuild -->
  <link href='//fonts.googleapis.com/css?family=Marvel:400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.css">

  <!-- JS -->
  <!-- build:js /assets/javascript/all.min.js -->
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.4/js/bootstrap.min.js"></script>
  <script src="//cdn.jsdelivr.net/autocomplete.js/0/autocomplete.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/algoliasearch/3.5.0/algoliasearch.min.js"></script>
  <script>
    window.baseUrl = 'http://shipow.github.io/cleanflight-web';
    window.algolia = algoliasearch('T2ZX9HO66V', '7119d2f6f1cd95224251ec2e490e824f');
    window.index = algolia.initIndex('dev_cleanflight');
  </script>
  <script type="text/template" id="my-custom-menu-template">
    <div class="my-custom-menu">
      <div class="row">
        <div class="col-sm-6">
          <div class="aa-dataset-d1"></div>
        </div>
        <div class="col-sm-6">
          <div class="aa-dataset-d2"></div>
          <div class="aa-dataset-d3"></div>
        </div>
      </div>
    </div>
  </script>
  <script src="http://shipow.github.io/cleanflight-web/assets/javascript/javascript.js"></script>
  <!-- endbuild -->

  <!-- Icons -->
  <link rel="shortcut icon" href="http://shipow.github.io/cleanflight-web/assets/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>

  <body>
    <nav class="navbar navbar-inverse">
      <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://shipow.github.io/cleanflight-web/"><img src="http://shipow.github.io/cleanflight-web/assets/images/cleanflight-logo.png" height="50"></a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="http://shipow.github.io/cleanflight-web/docs/getting-started.html">Documentation</a></li>
            <!-- <li><a href="#">Ressources</a></li> -->
            <li><a href="https://github.com/cleanflight/cleanflight">Contributing</a></li>
          </ul>
          <div class="search-wrapper">
            <input id="search" type="text" class="form-control" placeholder="Search">
          </div>
        </div><!-- /.navbar-collapse -->
      </div><!-- /.container-fluid -->
    </nav>
    <div class="container post">

  <div class="row post-full">
    <div class="col-md-9">
      <div class="content">
        <h1>Failsafe</h1>

<p>There are two types of failsafe:</p>

<ol>
<li>Receiver based failsafe</li>
<li>Flight controller based failsafe</li>
</ol>

<p>Receiver based failsafe is where you, from your transmitter and receiver, configure channels to output desired signals if your receiver detects signal loss and goes to <strong>rx-failsafe-state</strong>.
The idea is that you set throttle and other controls so the aircraft descends in a controlled manner.  See your receiver&rsquo;s documentation for this method.</p>

<p>Flight controller based failsafe is where the flight controller attempts to detect signal loss and/or the <strong>rx-failsafe-state</strong> of your receiver and upon detection goes to <strong>fc-failsafe-state</strong>. The idea is that the flight controller starts using substitutes for all controls, which are set by you, using the CLI command <code>rxfail</code> (see <code>rxfail</code> document) or the cleanflight-configurator GUI.</p>

<p>It is possible to use both types at the same time, which may be desirable.  Flight controller failsafe can even help if your receiver signal wires come loose, get damaged or your receiver malfunctions in a way the receiver itself cannot detect.</p>

<p>Alternatively you may configure a transmitter switch to activate failsafe mode. This is useful for fieldtesting the failsafe system and as a <strong><u><code>PANIC</code></u></strong> switch when you lose orientation.</p>

<h2>Flight controller failsafe system</h2>

<p>The <strong>failsafe-auto-landing</strong> system is not activated until 5 seconds after the flight controller boots up.  This is to prevent <strong>failsafe-auto-landing</strong> from activating, as in the case of TX/RX gear with long bind procedures, before the RX sends out valid data.</p>

<p>The <strong>failsafe-detection</strong> system attempts to detect when your receiver loses signal <em>continuously</em> but the <strong>failsafe-auto-landing</strong> starts <em>only when your craft is <strong>armed</strong></em>.  It then attempts to prevent your aircraft from flying away uncontrollably by enabling an auto-level mode and setting the throttle that should allow the craft to come to a safer landing.</p>

<p><strong>The failsafe is activated when the craft is armed and either:</strong></p>

<ul>
<li>The control (stick) channels do not have valid signals AND the failsafe guard time specified by <code>failsafe_delay</code> has elapsed.</li>
<li>A transmitter switch that is configured to control the failsafe mode is switched ON (and &lsquo;failsafe_kill_switch&rsquo; is set to 0).</li>
</ul>

<p>Failsafe intervention will be aborted when it was due to:</p>

<ul>
<li>a lost RC signal and the RC signal has recovered.</li>
<li>a transmitter failsafe switch was set to ON position and the switch is set to OFF position (and &#39;failsafe_kill_switch&rsquo; is set to 0).</li>
</ul>

<p>Note that:
* At the end of a failsafe intervention, the flight controller will be disarmed and re-arming will be locked. From that moment on it is no longer possible to abort or re-arm and the flight controller has to be reset.
* When &#39;failsafe_kill_switch&rsquo; is set to 1 and the rc switch configured for failsafe is set to ON, the craft is instantly disarmed (but re-arming is not locked). Similar effect can be achieved by setting &#39;failsafe_throttle&rsquo; to 1000 and &#39;failsafe_off_delay&rsquo; to 0 (but arming is locked).
* Prior to starting a failsafe intervention it is checked if the throttle position was below &#39;min_throttle&rsquo; level for the last &#39;failsafe_throttle_low_delay&rsquo; seconds. If it was the craft is assumed to be on the ground and is only disarmed. It may be re-armed without a power cycle.     </p>

<p>Some notes about <strong>SAFETY</strong>:
* The failsafe system will be activated regardless of current throttle position. So when the failsafe intervention is aborted (RC signal restored/failsafe switch set to OFF) the current stick position will direct the craft !
* The craft may already be on the ground with motors stopped and that motors and props could spin again - the software does not currently detect if the craft is on the ground.  Take care when using <code>MOTOR_STOP</code> feature. <strong>Props will spin up without warning</strong>, when armed with <code>MOTOR_STOP</code> feature ON (props are not spinning) <strong><u>and</u></strong> failsafe is activated !</p>

<h2>Configuration</h2>

<p>When configuring the flight controller failsafe, use the following steps:</p>

<ol>
<li> Configure your receiver to do one of the following:</li>
</ol>

<ul>
<li>Upon signal loss, send no signal/pulses over the channels</li>
<li>Send an invalid signal over the channels (for example, send values lower than &#39;rx_min_usec&rsquo;)</li>
</ul>

<p>and</p>

<ul>
<li>Ensure your receiver does not send out channel data that would cause a disarm by switch or sticks to be registered by the FC. This is especially important for those using a switch to arm.</li>
</ul>

<p>See your receiver&rsquo;s documentation for direction on how to accomplish one of these.</p>

<ul>
<li>Configure one of the transmitter switches to activate the failsafe mode.</li>
</ul>

<ol>
<li><p>Set &#39;failsafe_off_delay&rsquo; to an appropriate value based on how high you fly</p></li>
<li><p>Set &#39;failsafe_throttle&rsquo; to a value that allows the aircraft to descend at approximately one meter per second (default is 1000 which should be throttle off).</p></li>
</ol>

<p>These are the basic steps for flight controller failsafe configuration; see Failsafe Settings below for additional settings that may be changed.</p>

<h2>Failsafe Settings</h2>

<p>Failsafe delays are configured in 0.1 second steps.</p>

<p>1 step = 0.1sec</p>

<p>1 second = 10 steps</p>

<h3><code>failsafe_delay</code></h3>

<p>Guard time for failsafe activation after signal lost.  This is the amount of time the flight controller waits to see if it begins receiving a valid signal again before activating failsafe.</p>

<h3><code>failsafe_off_delay</code></h3>

<p>Delay after failsafe activates before motors finally turn off.  This is the amount of time &#39;failsafe_throttle&rsquo; is active.  If you fly at higher altitudes you may need more time to descend safely.</p>

<h3><code>failsafe_throttle</code></h3>

<p>Throttle level used for landing.  Specify a value that causes the aircraft to descend at about 1M/sec. Default is set to 1000 which should correspond to throttle off.</p>

<h3><code>failsafe_kill_switch</code></h3>

<p>Configure the rc switched failsafe action: the same action as when the rc link is lost (set to 0) or disarms instantly (set to 1). Also see above.</p>

<h3><code>failsafe_throttle_low_delay</code></h3>

<p>Time throttle level must have been below &#39;min_throttle&rsquo; to <u>only disarm</u> instead of <u>full failsafe procedure</u>.</p>

<p>Use standard RX usec values.  See Rx documentation.</p>

<h3><code>rx_min_usec</code></h3>

<p>The lowest channel value considered valid.  e.g. PWM/PPM pulse length </p>

<h3><code>rx_max_usec</code></h3>

<p>The highest channel value considered valid.  e.g. PWM/PPM pulse length </p>

<p>The <code>rx_min_usec</code> and <code>rx_max_usec</code> settings helps detect when your RX stops sending any data, enters failsafe mode or when the RX looses signal.</p>

<p>With a Graupner GR-24 configured for PWM output with failsafe on channels 1-4 set to OFF in the receiver settings then this setting, at its default value, will allow failsafe to be activated.</p>

<h2>Testing</h2>

<p><strong>Bench test the failsafe system before flying - <u>remove props while doing so</u>.</strong></p>

<ol>
<li>Arm the craft.</li>
<li>Turn off transmitter or unplug RX.</li>
<li>Observe motors spin at configured throttle setting for configured duration.</li>
<li>Observe motors turn off after configured duration.</li>
<li>Ensure that when you turn on your TX again or reconnect the RX that you cannot re-arm once the motors have stopped.</li>
<li>Power cycle the FC.</li>
<li>Arm the craft.</li>
<li>Turn off transmitter or unplug RX.</li>
<li>Observe motors spin at configured throttle setting for configured duration.</li>
<li>Turn on TX or reconnect RX.</li>
<li>Ensure that your switch positions don&rsquo;t now cause the craft to disarm (otherwise it would fall out of the sky on regained signal).</li>
<li>Observe that normal flight behavior is resumed.</li>
<li>Disarm.</li>
</ol>

<p><strong>Field test the failsafe system.</strong></p>

<ol>
<li>Perform bench testing first!</li>
<li>On a calm day go to an unpopulated area away from buildings or test indoors in a safe controlled environment - e.g. inside a big net.</li>
<li>Arm the craft.</li>
<li>Hover over something soft (long grass, ferns, heather, foam, etc.).</li>
<li>Descend the craft and observe throttle position and record throttle value from your TX channel monitor.  Ideally 1500 should be hover. So your value should be less than 1500.</li>
<li>Stop, disarm.</li>
<li>Set failsafe throttle to the recorded value.</li>
<li>Arm, hover over something soft again.</li>
<li>Turn off TX (!)</li>
<li>Observe craft descends and motors continue to spin for the configured duration.</li>
<li>Observe FC disarms after the configured duration.</li>
<li>Remove flight battery.</li>
</ol>

<p>If craft descends too quickly then increase failsafe throttle setting.</p>

<p>Ensure that the duration is long enough for your craft to land at the altitudes you normally fly at.</p>

<p>Using a configured transmitter switch to activate failsafe mode, instead of switching off your TX, is good primary testing method in addition to the above procedure.</p>

      </div>
    </div>
    <div class="col-md-3">
      <div class="spacer30"></div>
      <h2>Documentation</h2>
      <ul class="posts list-unstyled">
        
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/1wire.html">1wire</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/autotune.html">Autotune</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/battery.html">Battery</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/blackbox.html">Blackbox</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/board-alienwii32.html">Board   Alienwii32</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/board-cc3d.html">Board   Cc3d</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/board-chebuzzf3.html">Board   Chebuzzf3</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/board-cjmcu.html">Board   Cjmcu</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/board-colibrirace.html">Board   Colibrirace</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/board-motolab.html">Board   Motolab</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/board-naze32.html">Board   Naze32</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/board-olimexino.html">Board   Olimexino</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/board-paris-air-hero-32.html">Board   Paris Air Hero 32</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/board-rmdo.html">Board   Rmdo</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/board-sparky.html">Board   Sparky</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/board-spracingf3.html">Board   Spracingf3</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/boards.html">Boards</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/buzzer.html">Buzzer</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/cli.html">Cli</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/configuration.html">Configuration</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/controls.html">Controls</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/display.html">Display</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/failsafe.html">Failsafe</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/getting-started.html">Getting Started</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/gps.html">Gps</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/gtune.html">Gtune</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/inflight-adjustments.html">Inflight Adjustments</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/installation.html">Installation</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/introduction.html">Introduction</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/ledstrip.html">Ledstrip</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/migrating-from-baseflight.html">Migrating From Baseflight</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/mixer.html">Mixer</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/modes.html">Modes</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/oneshot.html">Oneshot</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/pid-tuning.html">Pid Tuning</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/profiles.html">Profiles</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/rssi.html">Rssi</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/rx.html">Rx</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/safety.html">Safety</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/serial.html">Serial</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/sonar.html">Sonar</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/spektrum-bind.html">Spektrum Bind</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/telemetry.html">Telemetry</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/usb-flashing.html">Usb Flashing</a></li>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      </ul>
      
        <div class="catbloc" id="docs">
          
          
        </div>
      
        <div class="catbloc" id="api">
          
          
            <h3>api</h3>
            <ul class="posts list-unstyled">
              
                
                  
                
              
                
                  
                    <li>
                      <a href="/docs/api/msp-extensions.html">
                        Msp_extensions
                      </a>
                    </li>
                  
                
              
            </ul>
          
        </div>
      
        <div class="catbloc" id="development">
          
          
            <h3>development</h3>
            <ul class="posts list-unstyled">
              
                
                  
                
              
                
                  
                    <li>
                      <a href="/docs/development/travis.html">
                        Travis
                      </a>
                    </li>
                  
                
                  
                    <li>
                      <a href="/docs/development/pid-internals.html">
                        Pid Internals
                      </a>
                    </li>
                  
                
                  
                    <li>
                      <a href="/docs/development/hardware-debugging.html">
                        Hardware Debugging
                      </a>
                    </li>
                  
                
                  
                    <li>
                      <a href="/docs/development/hardware-debugging-in-eclipse.html">
                        Hardware Debugging In Eclipse
                      </a>
                    </li>
                  
                
                  
                    <li>
                      <a href="/docs/development/development.html">
                        Development
                      </a>
                    </li>
                  
                
                  
                    <li>
                      <a href="/docs/development/configuration-storage.html">
                        Configuration Storage
                      </a>
                    </li>
                  
                
                  
                    <li>
                      <a href="/docs/development/building-manual.html">
                        Building Manual
                      </a>
                    </li>
                  
                
                  
                    <li>
                      <a href="/docs/development/building-in-windows.html">
                        Building In Windows
                      </a>
                    </li>
                  
                
                  
                    <li>
                      <a href="/docs/development/building-in-ubuntu.html">
                        Building In Ubuntu
                      </a>
                    </li>
                  
                
                  
                    <li>
                      <a href="/docs/development/building-in-mac-os-x.html">
                        Building In Mac Os X
                      </a>
                    </li>
                  
                
                  
                    <li>
                      <a href="/docs/development/building-in-eclipse.html">
                        Building In Eclipse
                      </a>
                    </li>
                  
                
                  
                    <li>
                      <a href="/docs/development/blackbox-internals.html">
                        Blackbox Internals
                      </a>
                    </li>
                  
                
                  
                    <li>
                      <a href="/docs/development/atomic-barrier.html">
                        Atomic Barrier
                      </a>
                    </li>
                  
                
              
            </ul>
          
        </div>
      
    </div>
  </div>
</div>
    <footer class="footer text-center">
      <i class="fa fa-copyright"></i> 2015 Cleanflight Team
    </footer>
  </body>
</html>
