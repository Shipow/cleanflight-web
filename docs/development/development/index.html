<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Development &middot; Cleanflight
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.4/css/bootstrap.min.css">
  <!-- build:css /assets/stylesheets/style.min.css -->
  <link rel="stylesheet" href="http://shipow.github.io/cleanflight-web/assets/stylesheets/style.css">
  <!-- endbuild -->
  <link href='//fonts.googleapis.com/css?family=Marvel:400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.css">

  <!-- JS -->
  <!-- build:js /assets/javascript/all.min.js -->
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.4/js/bootstrap.min.js"></script>
  <script src="//cdn.jsdelivr.net/typeahead.js/0.10.5/typeahead.jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/algoliasearch/3.5.0/algoliasearch.min.js"></script>
  <script src="http://shipow.github.io/cleanflight-web/assets/javascript/javascript.js"></script>
    <script>
    window.baseUrl = 'http://shipow.github.io/cleanflight-web';
    window.algolia = algoliasearch('T2ZX9HO66V', '7119d2f6f1cd95224251ec2e490e824f');
    window.index = algolia.initIndex('dev_cleanflight');
  </script>
  <!-- endbuild -->

  <!-- Icons -->
  <link rel="shortcut icon" href="http://shipow.github.io/cleanflight-web/assets/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>

  <body>
    <nav class="navbar navbar-inverse">
      <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#"><img src="http://shipow.github.io/cleanflight-web/assets/images/cleanflight-logo.png" height="50"></a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav navbar-right">
            <!-- <li><a href="#">Get Started</a></li> -->
            <li><a href="http://shipow.github.io/cleanflight-web/categories/docs">Documentation</a></li>
            <!-- <li><a href="#">Ressources</a></li> -->
            <li><a href="https://github.com/cleanflight/cleanflight">Contributing</a></li>
          </ul>
          <form class="navbar-form navbar-right" role="search">
            <div class="form-group">
              <input id="search" type="text" class="form-control" placeholder="Search">
            </div>
          </form>
        </div><!-- /.navbar-collapse -->
      </div><!-- /.container-fluid -->
    </nav>
    <div class="container">
  <div class="page-header">
    <h1>Development </h1>
  </div>

  <div class="row post-full">
    <div class="col-md-9">
      <div class="content">
        <h1>Development</h1>

<p>This document is primarily for developers only.</p>

<h2>General principals</h2>

<ol>
<li>Name everything well.</li>
<li>Strike a balance between simplicity and not-repeating code.</li>
<li>Methods that return a boolean should be named as a question, and should not change state.  e.g. &lsquo;isOkToArm()&rsquo;</li>
<li>Methods that start with the word &#39;find&rsquo; can return a null, methods that start with &#39;get&rsquo; should not.</li>
<li>Methods should have verb or verb-phrase names, like <code>deletePage</code> or <code>save</code>.  Variables should not, they generally should be nouns.  Tell the system to &#39;do&rsquo; something &#39;with&rsquo; something.  e.g. deleteAllPages(pageList).</li>
<li>Keep methods short - it makes it easier to test.</li>
<li>Don&rsquo;t be afraid of moving code to a new file - it helps to reduce test dependencies.</li>
<li>Avoid noise-words in variable names, like &#39;data&rsquo; or &#39;info&rsquo;.  Think about what you&rsquo;re naming and name it well.  Don&rsquo;t be afraid to rename anything.</li>
<li>Avoid comments that describe what the code is doing, the code should describe itself.  Comments are useful however for big-picture purposes and to document content of variables.</li>
<li>If you need to document a variable do it at the declarion, don&rsquo;t copy the comment to the <code>extern</code> usage since it will lead to comment rot.</li>
<li>Seek advice from other developers - know you can always learn more.</li>
<li>Be professional - attempts at humor or slating existing code in the codebase itself is not helpful when you have to change/fix it.</li>
<li>Know that there&rsquo;s always more than one way to do something and that code is never final - but it does have to work.</li>
</ol>

<p>Before making any code contributions, take a note of the <a href="https://github.com/multiwii/baseflight/wiki/CodingStyle">https://github.com/multiwii/baseflight/wiki/CodingStyle</a></p>

<p>It is also advised to read about clean code, here are some useful links:</p>

<ul>
<li><a href="http://cleancoders.com/">http://cleancoders.com/</a></li>
<li><a href="http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29">http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29</a></li>
<li><a href="http://en.wikipedia.org/wiki/Code_smell">http://en.wikipedia.org/wiki/Code_smell</a></li>
<li><a href="http://en.wikipedia.org/wiki/Code_refactoring">http://en.wikipedia.org/wiki/Code_refactoring</a></li>
<li><a href="http://www.amazon.co.uk/Working-Effectively-Legacy-Robert-Martin/dp/0131177052">http://www.amazon.co.uk/Working-Effectively-Legacy-Robert-Martin/dp/0131177052</a></li>
</ul>

<h2>Unit testing</h2>

<p>Ideally, there should be tests for any new code. However, since this is a legacy codebase which was not designed to be tested this might be a bit difficult.</p>

<p>If you want to make changes and want to make sure it&rsquo;s tested then focus on the minimal set of changes required to add a test.</p>

<p>Tests currently live in the <code>test</code> folder and they use the google test framework. 
The tests are compiled and run natively on your development machine and not on the target platform.
This allows you to develop tests and code and actually execute it to make sure it works without needing a development board or simulator.</p>

<p>This project could really do with some functional tests which test the behaviour of the application.</p>

<p>All pull requests to add/improve the testability of the code or testing methods are highly sought!</p>

<p>Note: Tests are written in C++ and linked with with firmware&rsquo;s C code.</p>

<h3>Running the tests.</h3>

<p>The tests and test build system is very simple and based of the googletest example files, it will be improved in due course.</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">cd test
make
</code></pre></div>
<p>This will build a set of executable files, one for each <code>*_unittest.cc</code> file.</p>

<p>You can run them on the command line to execute the tests and to see the test report.</p>

<p>You can also step-debug the tests in eclipse and you can use the GoogleTest test runner to make building and re-running the tests simple.</p>

<p>The tests are currently always compiled with debugging information enabled, there may be additional warnings, if you see any warnings please attempt to fix them and submit pull requests with the fixes.</p>

<p>Tests are verified and working with GCC 4.9.2.</p>

<h2>Using git and github</h2>

<p>Ensure you understand the github workflow: <a href="https://guides.github.com/introduction/flow/index.html">https://guides.github.com/introduction/flow/index.html</a></p>

<p>Please keep pull requests focused on one thing only, since this makes it easier to merge and test in a timely manner.</p>

<p>If you need help with pull requests there are guides on github here:</p>

<p><a href="https://help.github.com/articles/creating-a-pull-request/">https://help.github.com/articles/creating-a-pull-request/</a></p>

<p>The main flow for a contributing is as follows:</p>

<ol>
<li>Login to github, goto the cleanflight repository and press <code>fork</code>.</li>
<li>Then using the command line/terminal on your computer: <code>git clone &lt;url to YOUR fork&gt;</code></li>
<li><code>cd cleanflight</code></li>
<li><code>git checkout master</code></li>
<li><code>git checkout -b my-new-code</code></li>
<li>Make changes</li>
<li><code>git add &lt;files that have changed&gt;</code></li>
<li><code>git commit</code></li>
<li><code>git push origin my-new-code</code></li>
<li>Create pull request using github UI to merge your changes from your new branch into <code>cleanflight/master</code></li>
<li>Repeat from step 4 for new other changes.</li>
</ol>

<p>The primary thing to remember is that separate pull requests should be created for separate branches.  Never create a pull request from your <code>master</code> branch.</p>

<p>Later, you can get the changes from the cleanflight repo into your <code>master</code> branch by adding cleanflight as a git remote and merging from it as follows:</p>

<ol>
<li><code>git remote add cleanflight https://github.com/cleanflight/cleanflight.git</code></li>
<li><code>git checkout master</code></li>
<li><code>git fetch cleanflight</code></li>
<li><code>git merge cleanflight/master</code></li>
<li><code>git push origin master</code> is an optional step that will update your fork on github</li>
</ol>

<p>You can also perform the git commands using the git client inside Eclipse.  Refer to the Eclipse git manual.</p>

      </div>
    </div>
    <div class="col-md-3">
      <ul class="posts list-unstyled">
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/development/travis">Travis</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/development/'>development</a>, <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/telemetry">Telemetry</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/spektrum-bind">Spektrum Bind</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/sonar">Sonar</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/serial">Serial</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/safety">Safety</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/rx">Rx</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/rssi">Rssi</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/profiles">Profiles</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/pid-tuning">Pid Tuning</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/development/pid-internals">Pid Internals</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/development/'>development</a>, <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/oneshot">Oneshot</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/api/msp_extensions">Msp_extensions</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/api/'>api</a>, <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/modes">Modes</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/mixer">Mixer</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/migrating-from-baseflight">Migrating From Baseflight</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/ledstrip">Ledstrip</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/introduction">Introduction</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/installation">Installation</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/inflight-adjustments">Inflight Adjustments</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/development/hardware-debugging-in-eclipse">Hardware Debugging In Eclipse</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/development/'>development</a>, <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/development/hardware-debugging">Hardware Debugging</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/development/'>development</a>, <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/gps">Gps</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/getting-started">Getting Started</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/failsafe">Failsafe</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/display">Display</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/development/development">Development</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/development/'>development</a>, <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/controls">Controls</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/development/configuration-storage">Configuration Storage</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/development/'>development</a>, <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/configuration">Configuration</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/cli">Cli</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/buzzer">Buzzer</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/development/building-manual">Building Manual</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/development/'>development</a>, <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/development/building-in-windows">Building In Windows</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/development/'>development</a>, <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/development/building-in-ubuntu">Building In Ubuntu</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/development/'>development</a>, <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/development/building-in-mac-os-x">Building In Mac Os X</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/development/'>development</a>, <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/development/building-in-eclipse">Building In Eclipse</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/development/'>development</a>, <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/boards">Boards</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/board---sparky">Board   Sparky</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/board---paris-air-hero-32">Board   Paris Air Hero 32</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/board---olimexino">Board   Olimexino</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/board---naze32">Board   Naze32</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/board---cjmcu">Board   Cjmcu</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/board---chebuzzf3">Board   Chebuzzf3</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/board---cc3d">Board   Cc3d</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/board---alienwii32">Board   Alienwii32</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/blackbox">Blackbox</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/battery">Battery</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/autotune">Autotune</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/docs/'>docs</a></div> -->
      
          <li><a href="http://shipow.github.io/cleanflight-web//docs/development/atomic-barrier">Atomic Barrier</a></li>
          <!-- <div class="categories">Filed under <a class='category' href='/categories/development/'>development</a>, <a class='category' href='/categories/docs/'>docs</a></div> -->
      
    </div>
  </div>
</div>
    <footer class="footer text-center">
      <i class="fa fa-copyright"></i> 2015 Cleanflight Team
    </footer>
  </body>
</html>
