<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Building In Ubuntu &middot; Cleanflight
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.4/css/bootstrap.min.css">
  <!-- build:css /assets/stylesheets/style.min.css -->
  <link rel="stylesheet" href="http://shipow.github.io/cleanflight-web/assets/stylesheets/style.css">
  <!-- endbuild -->
  <link href='//fonts.googleapis.com/css?family=Marvel:400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.css">

  <!-- JS -->
  <!-- build:js /assets/javascript/all.min.js -->
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.4/js/bootstrap.min.js"></script>
  <script src="//cdn.jsdelivr.net/typeahead.js/0.10.5/typeahead.jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/algoliasearch/3.5.0/algoliasearch.min.js"></script>
  <script src="http://shipow.github.io/cleanflight-web/assets/javascript/javascript.js"></script>
    <script>
    window.baseUrl = 'http://shipow.github.io/cleanflight-web';
    window.algolia = algoliasearch('T2ZX9HO66V', '7119d2f6f1cd95224251ec2e490e824f');
    window.index = algolia.initIndex('dev_cleanflight');
  </script>
  <!-- endbuild -->

  <!-- Icons -->
  <link rel="shortcut icon" href="http://shipow.github.io/cleanflight-web/assets/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>

  <body>
    <nav class="navbar navbar-inverse">
      <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://shipow.github.io/cleanflight-web/"><img src="http://shipow.github.io/cleanflight-web/assets/images/cleanflight-logo.png" height="50"></a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="http://shipow.github.io/cleanflight-web/docs/getting-started/">Get Started</a></li>
            <li><a href="http://shipow.github.io/cleanflight-web/categories/docs">Documentation</a></li>
            <!-- <li><a href="#">Ressources</a></li> -->
            <li><a href="https://github.com/cleanflight/cleanflight">Contributing</a></li>
          </ul>
          <form class="navbar-form navbar-right" role="search">
            <div class="form-group">
              <input id="search" type="text" class="form-control" placeholder="Search">
            </div>
          </form>
        </div><!-- /.navbar-collapse -->
      </div><!-- /.container-fluid -->
    </nav>
    <div class="container post">

  <div class="row post-full">
    <div class="col-md-9">
      <div class="content">
        <h1>Building in Ubuntu</h1>

<p>Building for Ubuntu platform is remarkably easy. The only trick to understand is that the Ubuntu toolchain,
which they are downstreaming from Debian, is not compatible with Cleanflight. We suggest that you take an
alternative PPA from Terry Guo, found here:
<a href="https://launchpad.net/%7Eterry.guo/+archive/ubuntu/gcc-arm-embedded">https://launchpad.net/~terry.guo/+archive/ubuntu/gcc-arm-embedded</a></p>

<p>This PPA has several compiler versions and platforms available. For many hardware platforms (notably Naze)
the 4.9.3 compiler will work fine. For some, older compiler 4.8 (notably Sparky) is more appropriate. We
suggest you build with 4.9.3 first, and try to see if you can connect to the CLI or run the Configurator.
If you cannot, please see the section below for further hints on what you might do.</p>

<h2>Setup GNU ARM Toolchain</h2>

<p>Note specifically the last paragraph of Terry&rsquo;s PPA documentation &ndash; Ubuntu carries its own package for
<code>gcc-arm-none-eabi</code>, so you&rsquo;ll have to remove it, and then pin the one from the PPA.
For your release, you should first remove any older pacakges (from Debian or Ubuntu directly), introduce
Terry&rsquo;s PPA, and update:
<code>
sudo apt-get remove binutils-arm-none-eabi gcc-arm-none-eabi
sudo add-apt-repository ppa:terry.guo/gcc-arm-embedded
sudo apt-get update
</code></p>

<p>For Ubuntu 14.10 (current release, called Utopic Unicorn), you should pin:
<code>
sudo apt-get install gcc-arm-none-eabi=4.9.3.2014q4-0utopic12
</code></p>

<p>For Ubuntu 14.04 (an LTS as of Q1&#39;2015, called Trusty Tahr), you should pin:
<code>
sudo apt-get install gcc-arm-none-eabi=4.9.3.2014q4-0trusty12
</code></p>

<p>For Ubuntu 12.04 (previous LTS, called Precise Penguin), you should pin:
<code>
sudo apt-get install gcc-arm-none-eabi=4.9.3.2014q4-0precise12
</code></p>

<h2>Building on Ubuntu</h2>

<p>After the ARM toolchain from Terry is installed, you should be able to build from source.
<code>
cd src
git clone git@github.com:cleanflight/cleanflight.git
cd cleanflight
make TARGET=NAZE
</code></p>

<p>You&rsquo;ll see a set of files being compiled, and finally linked, yielding both an ELF and then a HEX:
<code>
...
arm-none-eabi-size ./obj/main/cleanflight_NAZE.elf 
   text    data     bss     dec     hex filename
  97164     320   11080  108564   1a814 ./obj/main/cleanflight_NAZE.elf
arm-none-eabi-objcopy -O ihex --set-start 0x8000000 obj/main/cleanflight_NAZE.elf obj/cleanflight_NAZE.hex
$ ls -la obj/cleanflight_NAZE.hex                                                                                                                                                 
-rw-rw-r-- 1 pim pim 274258 Jan 12 21:45 obj/cleanflight_NAZE.hex
</code></p>

<p>You can use the Cleanflight-Configurator to flash the <code>obj/cleanflight_NAZE.hex</code> file.</p>

<h2>Bricked/Bad build?</h2>

<p>Users have reported that the 4.9.3 compiler for ARM produces bad builds, for example on the Sparky hardware platform.
It is very likely that using an older compiler would be fine &ndash; Terry happens to have also a 4.8 2014q2 build in his
PPA - to install this, you can fetch the <code>.deb</code> directly:
<a href="http://ppa.launchpad.net/terry.guo/gcc-arm-embedded/ubuntu/pool/main/g/gcc-arm-none-eabi/">http://ppa.launchpad.net/terry.guo/gcc-arm-embedded/ubuntu/pool/main/g/gcc-arm-none-eabi/</a></p>

<p>and use <code>dpkg</code> to install:
<code>
sudo dpkg -i gcc-arm-none-eabi_4-8-2014q2-0saucy9_amd64.deb
</code></p>

<p>Make sure to remove <code>obj/</code> and <code>make clean</code>, before building again.</p>

<h2>Updating and rebuilding</h2>

<p>Navigate to the local cleanflight repository and use the following steps to pull the latest changes and rebuild your version of cleanflight:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">cd src/cleanflight
git reset --hard
git pull
make clean TARGET=NAZE
make
</code></pre></div>
<p>Credit goes to K.C. Budd, AKfreak for testing, and pulsar for doing the long legwork that yielded this very short document.</p>

      </div>
    </div>
    <div class="col-md-3">
      <div class="spacer30"></div>
      <h2>Documentation</h2>
      <ul class="posts list-unstyled">
        
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/1wire">1wire</a></li>
          
        
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/autotune">Autotune</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/battery">Battery</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/blackbox">Blackbox</a></li>
          
        
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/board---alienwii32">Board   Alienwii32</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/board---cc3d">Board   Cc3d</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/board---chebuzzf3">Board   Chebuzzf3</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/board---cjmcu">Board   Cjmcu</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/board---colibrirace">Board   Colibrirace</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/board---motolab">Board   Motolab</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/board---naze32">Board   Naze32</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/board---olimexino">Board   Olimexino</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/board---paris-air-hero-32">Board   Paris Air Hero 32</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/board---rmdo">Board   Rmdo</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/board---sparky">Board   Sparky</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/board---spracingf3">Board   Spracingf3</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/boards">Boards</a></li>
          
        
          
        
          
        
          
        
          
        
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/buzzer">Buzzer</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/cli">Cli</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/configuration">Configuration</a></li>
          
        
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/controls">Controls</a></li>
          
        
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/display">Display</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/failsafe">Failsafe</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/getting-started">Getting Started</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/gps">Gps</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/gtune">Gtune</a></li>
          
        
          
        
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/inflight-adjustments">Inflight Adjustments</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/installation">Installation</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/introduction">Introduction</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/ledstrip">Ledstrip</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/migrating-from-baseflight">Migrating From Baseflight</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/mixer">Mixer</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/modes">Modes</a></li>
          
        
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/oneshot">Oneshot</a></li>
          
        
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/pid-tuning">Pid Tuning</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/profiles">Profiles</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/rssi">Rssi</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/rx">Rx</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/safety">Safety</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/serial">Serial</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/sonar">Sonar</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/spektrum-bind">Spektrum Bind</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/telemetry">Telemetry</a></li>
          
        
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web//docs/usb-flashing">Usb Flashing</a></li>
          
        
      </ul>
      
        <div class="catbloc" id="docs">
          
          
        </div>
      
        <div class="catbloc" id="development">
          
          
            <h3>development</h3>
            <ul class="posts list-unstyled">
              
                
                  
                
              
                
                  
                    <li>
                      <a href="/docs/development/travis">
                        Travis
                      </a>
                    </li>
                  
                
                  
                    <li>
                      <a href="/docs/development/pid-internals">
                        Pid Internals
                      </a>
                    </li>
                  
                
                  
                    <li>
                      <a href="/docs/development/hardware-debugging-in-eclipse">
                        Hardware Debugging In Eclipse
                      </a>
                    </li>
                  
                
                  
                    <li>
                      <a href="/docs/development/hardware-debugging">
                        Hardware Debugging
                      </a>
                    </li>
                  
                
                  
                    <li>
                      <a href="/docs/development/development">
                        Development
                      </a>
                    </li>
                  
                
                  
                    <li>
                      <a href="/docs/development/configuration-storage">
                        Configuration Storage
                      </a>
                    </li>
                  
                
                  
                    <li>
                      <a href="/docs/development/building-manual">
                        Building Manual
                      </a>
                    </li>
                  
                
                  
                    <li>
                      <a href="/docs/development/building-in-windows">
                        Building In Windows
                      </a>
                    </li>
                  
                
                  
                    <li>
                      <a href="/docs/development/building-in-ubuntu">
                        Building In Ubuntu
                      </a>
                    </li>
                  
                
                  
                    <li>
                      <a href="/docs/development/building-in-mac-os-x">
                        Building In Mac Os X
                      </a>
                    </li>
                  
                
                  
                    <li>
                      <a href="/docs/development/building-in-eclipse">
                        Building In Eclipse
                      </a>
                    </li>
                  
                
                  
                    <li>
                      <a href="/docs/development/blackbox-internals">
                        Blackbox Internals
                      </a>
                    </li>
                  
                
                  
                    <li>
                      <a href="/docs/development/atomic-barrier">
                        Atomic Barrier
                      </a>
                    </li>
                  
                
              
            </ul>
          
        </div>
      
        <div class="catbloc" id="api">
          
          
            <h3>api</h3>
            <ul class="posts list-unstyled">
              
                
                  
                
              
                
                  
                    <li>
                      <a href="/docs/api/msp_extensions">
                        Msp_extensions
                      </a>
                    </li>
                  
                
              
            </ul>
          
        </div>
      
    </div>
  </div>
</div>
    <footer class="footer text-center">
      <i class="fa fa-copyright"></i> 2015 Cleanflight Team
    </footer>
  </body>
</html>
