<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Hardware Debugging &middot; Cleanflight
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.4/css/bootstrap.min.css">
  <!-- build:css /assets/stylesheets/style.min.css -->
  <link rel="stylesheet" href="http://shipow.github.io/cleanflight-web/assets/stylesheets/style.css">
  <!-- endbuild -->
  <link href='//fonts.googleapis.com/css?family=Marvel:400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.css">

  <!-- JS -->
  <!-- build:js /assets/javascript/all.min.js -->
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.4/js/bootstrap.min.js"></script>
  <script src="//cdn.jsdelivr.net/autocomplete.js/0/autocomplete.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/algoliasearch/3.5.0/algoliasearch.min.js"></script>
  <script>
    window.baseUrl = 'http://shipow.github.io/cleanflight-web';
    window.algolia = algoliasearch('T2ZX9HO66V', '7119d2f6f1cd95224251ec2e490e824f');
    window.index = algolia.initIndex('dev_cleanflight');
  </script>
  <script type="text/template" id="my-custom-menu-template">
    <div class="my-custom-menu">
      <div class="row">
        <div class="col-sm-6">
          <div class="aa-dataset-d1"></div>
        </div>
        <div class="col-sm-6">
          <div class="aa-dataset-d2"></div>
          <div class="aa-dataset-d3"></div>
        </div>
      </div>
    </div>
  </script>
  <script src="http://shipow.github.io/cleanflight-web/assets/javascript/javascript.js"></script>
  <!-- endbuild -->

  <!-- Icons -->
  <link rel="shortcut icon" href="http://shipow.github.io/cleanflight-web/assets/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>

  <body>
    <nav class="navbar navbar-inverse">
      <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="http://shipow.github.io/cleanflight-web/"><img src="http://shipow.github.io/cleanflight-web/assets/images/cleanflight-logo.png" height="50"></a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="http://shipow.github.io/cleanflight-web/docs/getting-started.html">Documentation</a></li>
            <!-- <li><a href="#">Ressources</a></li> -->
            <li><a href="https://github.com/cleanflight/cleanflight">Contributing</a></li>
          </ul>
          <div class="search-wrapper">
            <input id="search" type="text" class="form-control" placeholder="Search">
          </div>
        </div><!-- /.navbar-collapse -->
      </div><!-- /.container-fluid -->
    </nav>
    <div class="container post">

  <div class="row post-full">
    <div class="col-md-9">
      <div class="content">
        <h1>Hardware debugging</h1>

<p>The code can be compiled with debugging information, you can then upload a debug version to a board via a JLink/St-Link debug adapter and step through the code in your IDE.</p>

<p>More information about the necessary hardware and setting up the eclipse IDE can be found <a href="http://shipow.github.io/cleanflight-web/docs/hardware-debugging-in-eclipse/">here</a></p>

<p>A guide for visual studio can be found here:
<a href="http://visualgdb.com/tutorials/arm/st-link/">http://visualgdb.com/tutorials/arm/st-link/</a></p>

<p>This video is also helpful in understanding the proces:
<a href="https://www.youtube.com/watch?v=kjvqySyNw20">https://www.youtube.com/watch?v=kjvqySyNw20</a></p>

<h2>Hardware</h2>

<p>Various debugging hardware solutions exist, the Segger J-Link clones are cheap and are known to work on Windows with both the Naze and Olimexino platforms.</p>

<h3>J-Link devices</h3>

<p>Segger make excellent debuggers and debug software.</p>

<p>The Segger J-Link GDB server can be obtained from here.</p>

<p><a href="http://www.segger.com/jlink-software.html">http://www.segger.com/jlink-software.html</a></p>

<h4>Segger J-Link EDU EDU version, for hobbyists and educational use.</h4>

<p><img src="http://shipow.github.io/cleanflight-web/assets/images/j-link-edu.jpg" alt="Segger J-Link EDU"></p>

<p><a href="https://www.segger.com/j-link-edu.html">https://www.segger.com/j-link-edu.html</a></p>

<h4>USB-MiniJTAG J-Link JTAG/SWD Debugger/Emulator</h4>

<p><a href="http://www.hotmcu.com/usbminijtag-jlink-jtagswd-debuggeremula%E2%80%8Btor-p-29.html?cPath=3_25&amp;zenid=fdefvpnod186umrhsek225dc10">http://www.hotmcu.com/usbminijtag-jlink-jtagswd-debuggeremula%E2%80%8Btor-p-29.html?cPath=3_25&amp;zenid=fdefvpnod186umrhsek225dc10</a></p>

<p><img src="http://shipow.github.io/cleanflight-web/assets/images/THAOYU-USB-MiniJTAG.jpg" alt="THAOYU USB-MiniJTAG"></p>

<h5>ARM-JTAG-20-10 adapter</h5>

<p><a href="https://www.olimex.com/Products/ARM/JTAG/ARM-JTAG-20-10/">https://www.olimex.com/Products/ARM/JTAG/ARM-JTAG-20-10/</a>
<a href="http://uk.farnell.com/jsp/search/productdetail.jsp?sku=2144328">http://uk.farnell.com/jsp/search/productdetail.jsp?sku=2144328</a></p>

<p><img src="http://shipow.github.io/cleanflight-web/assets/images/OLIMEX-ARM-JTAG-ADAPTER-2144328-40.jpg" alt="OLIMEX ARM JTAG ADAPTER"></p>

<h4>CJMCU-STM32 Singlechip Development Board Jlink Downloader Jlink ARM Programmer</h4>

<p><img src="http://shipow.github.io/cleanflight-web/assets/images/cjmcu-jlink-front.jpg" alt="CJMCU-STM32 Jlink ARM Programmer Front"></p>

<p><img src="http://shipow.github.io/cleanflight-web/assets/images/cjmcu-jlink-back.jpg" alt="CJMCU-STM32 Jlink ARM Programmer Back"></p>

<p><a href="http://www.goodluckbuy.com/cjmcu-stm32-singlechip-development-board-jlink-downloader-jlink-arm-programmer.html">http://www.goodluckbuy.com/cjmcu-stm32-singlechip-development-board-jlink-downloader-jlink-arm-programmer.html</a></p>

<h3>STLink V2 devices</h3>

<p>STLink V2 devices can be used too, via OpenOCD.</p>

<h4>CEPark STLink V2</h4>

<p><img src="http://shipow.github.io/cleanflight-web/assets/images/cepark-stlink-v2-front.jpg" alt="CEPark STLink V2"></p>

<p><a href="http://www.goodluckbuy.com/cepark-stlink-st-link-v2-emulator-programmer-stm8-stm32-downloader.html">http://www.goodluckbuy.com/cepark-stlink-st-link-v2-emulator-programmer-stm8-stm32-downloader.html</a></p>

<h2>Compilation options</h2>

<p>use <code>DEBUG=GDB</code> make argument.</p>

<p>You may find that if you compile all the files with debug information on that the program is too big to fit on the target device.  If this happens you have some options:</p>

<ul>
<li>Compile all files without debug information (<code>make clean</code>, <code>make ...</code>), then re-save or <code>touch</code> the files you want to be able to step though and then run <code>make DEBUG=GDB</code>.  This will then re-compile the files you&rsquo;re interested in debugging with debugging symbols and you will get a smaller binary file which should then fit on the device.</li>
<li>You could use a development board such as an Olimexino or an EUSTM32F103RB, development boards often have more flash rom.</li>
</ul>

<h2>OSX</h2>

<h3>Install OpenOCD via Brew</h3>

<p>ruby -e &ldquo;$(curl -fsSL <a href="https://raw.githubusercontent.com/Homebrew/install/master/install)">https://raw.githubusercontent.com/Homebrew/install/master/install)</a>&rdquo;</p>

<p>brew install openocd</p>

<h3>GDB debug server</h3>

<h4>J-Link</h4>

<h5>Windows</h5>

<p>Run the Launch the J-Link GDB Server program and configure using UI. </p>

<h4>OpenOCD</h4>

<h5>Windows</h5>

<p>STM32F103 targets</p>
<figure class="highlight"><pre><code class="language-text" data-lang="text">&quot;C:\Program Files (x86)\UTILS\openocd-0.8.0\bin-x64\openocd-x64-0.8.0.exe&quot; -f interface/stlink-v2.cfg -f target/stm32f1x_stlink.cfg
</code></pre></figure>
<p>STM32F30x targets</p>
<figure class="highlight"><pre><code class="language-text" data-lang="text">&quot;C:\Program Files (x86)\UTILS\openocd-0.8.0\bin-x64\openocd-x64-0.8.0.exe&quot; -f scripts\board\stm32f3discovery.cfg
</code></pre></figure>
<h5>OSX/Linux</h5>

<p>STM32F30x targets</p>
<figure class="highlight"><pre><code class="language-text" data-lang="text">  openocd -f /usr/share/openocd/scripts/board/stm32vldiscovery.cfg
</code></pre></figure>
      </div>
    </div>
    <div class="col-md-3">
      <div class="spacer30"></div>
      <h2>Documentation</h2>
      <ul class="posts list-unstyled">
        
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/1wire.html">1wire</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/autotune.html">Autotune</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/battery.html">Battery</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/blackbox.html">Blackbox</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/board-alienwii32.html">Board   Alienwii32</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/board-cc3d.html">Board   Cc3d</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/board-chebuzzf3.html">Board   Chebuzzf3</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/board-cjmcu.html">Board   Cjmcu</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/board-colibrirace.html">Board   Colibrirace</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/board-motolab.html">Board   Motolab</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/board-naze32.html">Board   Naze32</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/board-olimexino.html">Board   Olimexino</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/board-paris-air-hero-32.html">Board   Paris Air Hero 32</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/board-rmdo.html">Board   Rmdo</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/board-sparky.html">Board   Sparky</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/board-spracingf3.html">Board   Spracingf3</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/boards.html">Boards</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/buzzer.html">Buzzer</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/cli.html">Cli</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/configuration.html">Configuration</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/controls.html">Controls</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/display.html">Display</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/failsafe.html">Failsafe</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/getting-started.html">Getting Started</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/gps.html">Gps</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/gtune.html">Gtune</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/inflight-adjustments.html">Inflight Adjustments</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/installation.html">Installation</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/introduction.html">Introduction</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/ledstrip.html">Ledstrip</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/migrating-from-baseflight.html">Migrating From Baseflight</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/mixer.html">Mixer</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/modes.html">Modes</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/oneshot.html">Oneshot</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/pid-tuning.html">Pid Tuning</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/profiles.html">Profiles</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/rssi.html">Rssi</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/rx.html">Rx</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/safety.html">Safety</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/serial.html">Serial</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/sonar.html">Sonar</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/spektrum-bind.html">Spektrum Bind</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/telemetry.html">Telemetry</a></li>
          
        
          
            <li><a href="http://shipow.github.io/cleanflight-web/docs/usb-flashing.html">Usb Flashing</a></li>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      </ul>
      
        <div class="catbloc" id="docs">
          
          
        </div>
      
        <div class="catbloc" id="api">
          
          
            <h3>api</h3>
            <ul class="posts list-unstyled">
              
                
                  
                
              
                
                  
                    <li>
                      <a href="/api/docs/msp-extensions.html">
                        Msp_extensions
                      </a>
                    </li>
                  
                
              
            </ul>
          
        </div>
      
        <div class="catbloc" id="development">
          
          
            <h3>development</h3>
            <ul class="posts list-unstyled">
              
                
                  
                
              
                
                  
                    <li>
                      <a href="/docs/development/travis.html">
                        Travis
                      </a>
                    </li>
                  
                
                  
                    <li>
                      <a href="/docs/development/pid-internals.html">
                        Pid Internals
                      </a>
                    </li>
                  
                
                  
                    <li>
                      <a href="/development/docs/hardware-debugging.html">
                        Hardware Debugging
                      </a>
                    </li>
                  
                
                  
                    <li>
                      <a href="/development/docs/hardware-debugging-in-eclipse.html">
                        Hardware Debugging In Eclipse
                      </a>
                    </li>
                  
                
                  
                    <li>
                      <a href="/development/docs/development.html">
                        Development
                      </a>
                    </li>
                  
                
                  
                    <li>
                      <a href="/development/docs/configuration-storage.html">
                        Configuration Storage
                      </a>
                    </li>
                  
                
                  
                    <li>
                      <a href="/development/docs/building-manual.html">
                        Building Manual
                      </a>
                    </li>
                  
                
                  
                    <li>
                      <a href="/development/docs/building-in-windows.html">
                        Building In Windows
                      </a>
                    </li>
                  
                
                  
                    <li>
                      <a href="/development/docs/building-in-ubuntu.html">
                        Building In Ubuntu
                      </a>
                    </li>
                  
                
                  
                    <li>
                      <a href="/development/docs/building-in-mac-os-x.html">
                        Building In Mac Os X
                      </a>
                    </li>
                  
                
                  
                    <li>
                      <a href="/development/docs/building-in-eclipse.html">
                        Building In Eclipse
                      </a>
                    </li>
                  
                
                  
                    <li>
                      <a href="/development/docs/blackbox-internals.html">
                        Blackbox Internals
                      </a>
                    </li>
                  
                
                  
                    <li>
                      <a href="/development/docs/atomic-barrier.html">
                        Atomic Barrier
                      </a>
                    </li>
                  
                
              
            </ul>
          
        </div>
      
    </div>
  </div>
</div>
    <footer class="footer text-center">
      <i class="fa fa-copyright"></i> 2015 Cleanflight Team
    </footer>
  </body>
</html>
